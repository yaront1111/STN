# STN Real-World Configuration
# Optimized for actual flight data and hardware

# ============================================
# System Configuration
# ============================================
system.imu_rate_hz = 100.0   # Typical MEMS IMU rate
system.trn_rate_hz = 1.0     # Conservative TRN rate
system.gravity_rate_hz = 1.0 # Gravity update rate
system.output_rate_hz = 50.0 # Output decimation

# ============================================
# TRN - Tuned for Real-World
# ============================================
trn.enabled = 1.0
trn.alpha_base = 0.0005     # More conservative learning
trn.alpha_max = 0.05        # Lower max to prevent instability
trn.huber_threshold = 2.5   # Tighter outlier rejection
trn.slope_threshold = 0.15  # Higher threshold for noisy data
trn.velocity_gate = 3.0     # Tighter velocity consistency
trn.min_agl = 30.0          # Higher minimum for safety
trn.max_agl = 3000.0        # Practical maximum

# ============================================
# EKF - Real Sensor Noise Levels
# ============================================
# Higher process noise for real dynamics
ekf.q_pos = 0.5
ekf.q_vel = 0.1
ekf.q_att = 0.01

# Realistic measurement noise
ekf.r_trn_base = 100.0      # Real radar altimeter noise
ekf.r_gravity = 0.05        # Account for vibrations
ekf.r_baro = 5.0            # Typical barometer noise

# Conservative initial uncertainties
ekf.initial_pos_std = 50.0
ekf.initial_vel_std = 5.0
ekf.initial_att_std = 0.05

# ============================================
# Gravity Model
# ============================================
gravity.enabled = 1.0
gravity.use_egm2008 = 1.0    # Use real gravity model
gravity.anomaly_scale = 0.8  # Conservative scaling

# ============================================
# Terrain Model
# ============================================
terrain.use_srtm = 1.0       # Use real terrain
terrain.cache_tiles = 1.0    # Essential for performance

# ============================================
# File Paths
# ============================================
paths.egm2008 = data/egm2008.dat
paths.terrain = data/terrain
paths.output = data/realworld_output.csv