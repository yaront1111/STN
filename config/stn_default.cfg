# STN Default Configuration File
# Format: key = value
# Lines starting with # are comments

# ============================================
# System Configuration
# ============================================
system.imu_rate_hz = 200.0
system.trn_rate_hz = 2.0
system.gravity_rate_hz = 2.0
system.output_rate_hz = 100.0

# ============================================
# TRN (Terrain Referenced Navigation)
# ============================================
trn.enabled = 1.0
trn.alpha_base = 0.15       # Base learning rate (aggressive start)
trn.alpha_max = 0.3         # Maximum learning rate
trn.huber_threshold = 2.5   # Outlier threshold (sigma)
trn.slope_threshold = 0.002 # Minimum terrain slope for update (0.2% for flat terrain)
trn.velocity_gate = 5.0     # Maximum velocity consistency error
trn.min_agl = 10.0          # Minimum altitude AGL (m)
trn.max_agl = 5000.0        # Maximum altitude AGL (m)

# ============================================
# Extended Kalman Filter
# ============================================
# Process noise (Q matrix diagonal)
ekf.q_pos = 0.1             # Position uncertainty growth
ekf.q_vel = 0.01            # Velocity uncertainty growth  
ekf.q_att = 0.001           # Attitude uncertainty growth

# Measurement noise (R values)
ekf.r_trn_base = 25.0       # TRN measurement noise base
ekf.r_gravity = 0.01        # Gravity measurement noise
ekf.r_baro = 1.0            # Barometer measurement noise

# Initial uncertainties
ekf.initial_pos_std = 10.0  # Initial position std dev (m)
ekf.initial_vel_std = 1.0   # Initial velocity std dev (m/s)
ekf.initial_att_std = 0.01  # Initial attitude std dev (rad)

# ============================================
# Gravity Model
# ============================================
gravity.enabled = 1.0
gravity.use_egm2008 = 1.0    # Always use real EGM2008 data
gravity.anomaly_scale = 1.0  # Scale factor for anomalies

# ============================================
# Terrain Model
# ============================================
terrain.use_srtm = 1.0       # Always use real SRTM data
terrain.cache_tiles = 1.0    # Enable tile caching

# ============================================
# File Paths
# ============================================
paths.egm2008 = data/egm2008.dat
paths.terrain = data/terrain
paths.output = data/output.csv